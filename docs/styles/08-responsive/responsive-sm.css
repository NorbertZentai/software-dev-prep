/* Small phones */
@media (max-width: 480px) {
  .header-tools {
    gap: var(--space-sm);
  }

  #search-input {
    width: 120px;
    font-size: var(--font-size-xs);
  }

  .site-title {
    font-size: var(--font-size-lg);
  }

  .main-content {
    padding: var(--space-md);
  }

  .action-card {
    padding: var(--space-lg);
  }

  .theory-drawer,
  #theory-sidebar.theory-drawer.right,
  body.is-theory #theory-sidebar,
  #theory-sidebar { 
    width: min(88vw, 280px) !important; 
    max-width: 280px !important;
    right: -100% !important; /* ensure it starts off-screen */
  }

  #theory-sidebar.theory-drawer.right.open,
  body.is-theory #theory-sidebar.open,
  #theory-sidebar.open {
    right: 0 !important; /* slide in completely */
  }
  
  .theory-content { 
    padding: var(--space-md); 
  }
}

/* Desktop-only rules to ensure header toggles are hidden */
@media (min-width: 1024px) {
  #theory-drawer-toggle.theory-drawer-toggle,
  #global-nav-toggle,
  #toc-toggle { 
    display: none !important; 
  }
}